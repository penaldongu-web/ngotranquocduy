<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªì S∆° C√° Nh√¢n - Ng√¥ Tr·∫ßn Qu·ªëc Duy</title>
    <style>
        /* CSS cho giao di·ªán Cyber Dark/Neon Style */
        :root {
            --dark-bg: #0D0C1D; /* M√†u n·ªÅn r·∫•t t·ªëi (G·∫ßn nh∆∞ ƒëen) */
            --card-color: #1A1A2E; /* M√†u th·∫ª n·ªôi dung t·ªëi */
            --text-light: #F0F0F0; /* M√†u ch·ªØ s√°ng */
            --accent-primary: #FF33CC; /* Neon Pink/Magenta - M√†u nh·∫•n ch√≠nh */
            --accent-secondary: #00FFFF; /* Cyan/Aqua Blue - M√†u nh·∫•n ph·ª• */
            --font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        /* ƒê·ªãnh d·∫°ng c∆° b·∫£n cho to√†n b·ªô trang */
        body {
            font-family: var(--font-family);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--dark-bg);
            color: var(--text-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* T·∫°o hi·ªáu ·ª©ng n·ªÅn t·ªëi */
            background-image: radial-gradient(circle at center, rgba(50, 20, 100, 0.2) 0%, rgba(13, 12, 29, 1) 100%);
        }
        
        /* Wrapper ch·ª©a th·∫ª h·ªì s∆° v√† th·∫ª ph·∫£n h·ªìi */
        #main-wrapper {
            display: flex;
            flex-direction: column;
            gap: 30px; /* Kho·∫£ng c√°ch gi·ªØa th·∫ª h·ªì s∆° v√† th·∫ª ph·∫£n h·ªìi */
            padding: 30px 0;
            width: 90%;
            max-width: 500px;
        }

        /* Kh·ªëi h·ªì s∆° ch√≠nh gi·ªØa (The Card) */
        .profile-card {
            width: 100%; /* ƒê√£ ƒëi·ªÅu ch·ªânh ƒë·ªÉ ph√π h·ª£p v·ªõi wrapper */
            padding: 40px 30px;
            background-color: var(--card-color);
            border-radius: 16px;
            box-shadow: 0 0 40px rgba(255, 51, 204, 0.3); /* √Ånh s√°ng neon bao quanh */
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            /* Hi·ªáu ·ª©ng ƒë·ªï b√≥ng chuy·ªÉn ƒë·ªông (Dynamic Neon Glow) */
            animation: pulse-shadow 4s infinite alternate;
        }

        /* Keyframes cho hi·ªáu ·ª©ng ƒë·ªï b√≥ng */
        @keyframes pulse-shadow {
            0% {
                box-shadow: 0 0 40px rgba(255, 51, 204, 0.3), 0 0 10px rgba(0, 255, 255, 0.1);
            }
            100% {
                box-shadow: 0 0 50px rgba(255, 51, 204, 0.5), 0 0 20px rgba(0, 255, 255, 0.4);
            }
        }

        /* Logo/·∫¢nh ƒë·∫°i di·ªán */
        .profile-card img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-secondary);
            margin-bottom: 20px;
            box-shadow: 0 0 15px var(--accent-secondary); /* Shadow t·ª´ m√†u xanh neon */
            transition: transform 0.3s ease-in-out;
            animation: pop-in 0.5s ease-out; /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán */
        }

        .profile-card img:hover {
             transform: scale(1.05) rotate(3deg);
        }

        @keyframes pop-in {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* T√™n (Typing Effect) */
        h1 {
            font-size: 1.8em;
            font-weight: 700;
            margin: 10px 0;
            color: white;
            text-transform: uppercase;
            text-shadow: 0 0 5px var(--accent-primary);
            overflow: hidden; /* C·∫ßn cho hi·ªáu ·ª©ng g√µ */
            border-right: .15em solid var(--accent-primary); /* Con tr·ªè nh·∫•p nh√°y */
            white-space: nowrap; 
            letter-spacing: .1em; 
            width: 0; /* B·∫Øt ƒë·∫ßu v·ªõi ƒë·ªô r·ªông 0 */
            margin-left: auto;
            margin-right: auto;
            animation: 
                typing 2s steps(20, end) forwards, /* Hi·ªáu ·ª©ng g√µ */
                blink-caret .75s step-end infinite; /* Con tr·ªè */
        }

        /* Keyframes cho hi·ªáu ·ª©ng g√µ */
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        /* Keyframes cho con tr·ªè nh·∫•p nh√°y */
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--accent-primary); }
        }
        
        /* ƒê·∫∑t t√™n c√≥ ƒë·ªô r·ªông c·ªë ƒë·ªãnh ƒë·ªÉ typing effect ho·∫°t ƒë·ªông */
        .name-container {
            width: 100%;
            display: flex;
            justify-content: center;
        }

        /* Th√¥ng tin chi ti·∫øt (Ng√†y sinh, Tr∆∞·ªùng) */
        .details p {
            margin: 5px 0;
            font-size: 1em;
            color: var(--text-light);
            animation: fade-in 1s ease-out 2s forwards; /* Xu·∫•t hi·ªán sau khi g√µ t√™n */
            opacity: 0;
        }

        /* S·ªü th√≠ch */
        .hobbies {
            font-size: 1.1em;
            font-weight: 500;
            margin: 15px 0 25px;
            padding: 10px 0;
            border-top: 1px dashed rgba(255, 51, 204, 0.3);
            border-bottom: 1px dashed rgba(255, 51, 204, 0.3);
            color: var(--accent-primary);
            text-shadow: 0 0 3px rgba(255, 51, 204, 0.5);
            animation: fade-in 1s ease-out 2.5s forwards;
            opacity: 0;
        }

        /* Hi·ªáu ·ª©ng Fade In chung */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* M·ª•c ti√™u */
        .goals-section {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 255, 255, 0.2);
            animation: fade-in 1s ease-out 3s forwards;
            opacity: 0;
        }
        
        .goals-section h2 {
            font-size: 1.2em;
            color: var(--accent-secondary);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 5px var(--accent-secondary);
        }

        .goal-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .goal-badge {
            background-color: var(--dark-bg);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95em;
            border: 2px solid var(--accent-primary);
            box-shadow: 0 0 10px rgba(255, 51, 204, 0.5);
            cursor: pointer; /* Cho bi·∫øt c√≥ th·ªÉ t∆∞∆°ng t√°c */
            transition: all 0.2s;
        }
        
        .goal-badge:hover {
            background-color: var(--accent-primary);
            color: var(--dark-bg);
            border-color: white;
            box-shadow: 0 0 15px var(--accent-primary);
        }
        
        /* Hi·ªáu ·ª©ng khi nh·∫•n (t∆∞∆°ng t√°c JS) */
        .goal-badge.clicked {
            background-color: white !important;
            color: var(--dark-bg) !important;
            transform: scale(0.95);
            animation: goal-bounce 0.3s;
        }
        
        @keyframes goal-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(0.95); }
        }


        .goal-badge.dream-uni {
            border-color: var(--accent-secondary);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        
        .goal-badge.dream-uni:hover {
            background-color: var(--accent-secondary);
            color: var(--dark-bg);
            border-color: white;
            box-shadow: 0 0 15px var(--accent-secondary);
        }

        /* N√∫t m·∫°ng x√£ h·ªôi */
        .social-button {
            display: inline-block;
            margin-top: 30px;
            padding: 12px 25px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            color: var(--dark-bg);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 700;
            transition: background 0.3s, transform 0.1s;
            box-shadow: 0 4px 20px rgba(255, 51, 204, 0.4);
            text-transform: uppercase;
            animation: fade-in 1s ease-out 3.5s forwards;
            opacity: 0;
        }

        .social-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 25px rgba(0, 255, 255, 0.6);
        }
        
        /* === PH·∫¶N PH·∫¢N H·ªíI (FEEDBACK) === */
        .feedback-card {
            background-color: var(--card-color);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.1);
            width: 100%;
            margin-top: 20px;
        }

        .feedback-card h2 {
            color: var(--accent-secondary);
            text-shadow: 0 0 5px var(--accent-secondary);
            font-size: 1.5em;
            margin: 0 0 15px 0;
            text-align: center;
            text-transform: uppercase;
        }

        .feedback-card input, .feedback-card textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 51, 204, 0.5);
            background-color: var(--dark-bg);
            color: var(--text-light);
            border-radius: 6px;
            box-sizing: border-box;
            font-family: var(--font-family);
            outline: none;
        }
        .feedback-card input:focus, .feedback-card textarea:focus {
            border-color: var(--accent-secondary);
            box-shadow: 0 0 5px var(--accent-secondary);
        }

        .feedback-card textarea {
            resize: vertical;
            min-height: 60px;
        }

        .feedback-card button[type="submit"] {
            width: 100%;
            padding: 12px;
            background: var(--accent-secondary);
            color: var(--dark-bg);
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
            margin-bottom: 15px;
        }

        .feedback-card button[type="submit"]:hover {
            background: var(--accent-primary);
            box-shadow: 0 0 15px var(--accent-primary);
        }

        .feedback-list-title {
            color: var(--accent-primary);
            text-shadow: 0 0 3px var(--accent-primary);
            font-size: 1.1em;
            margin: 20px 0 15px;
            padding-top: 10px;
            border-top: 1px dashed rgba(255, 51, 204, 0.3);
            text-align: center;
        }

        #feedbackList {
            max-height: 250px;
            overflow-y: auto;
            padding: 0 5px;
        }
        
        /* Style cho t·ª´ng ph·∫£n h·ªìi */
        .comment-item {
            background-color: var(--dark-bg);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: left;
            border-left: 3px solid var(--accent-secondary);
            word-wrap: break-word; /* ƒê·∫£m b·∫£o tin nh·∫Øn d√†i kh√¥ng tr√†n */
        }

        .comment-name {
            font-weight: 700;
            color: var(--accent-primary);
            margin: 0;
            font-size: 0.9em;
        }

        .comment-message {
            margin: 5px 0 0;
            font-size: 0.9em;
            color: var(--text-light);
        }

        .comment-time {
            font-size: 0.7em;
            color: #6c757d;
            margin-top: 5px;
            text-align: right;
        }
        
        #userIdDisplay {
            font-size: 0.7em;
            color: #6c757d;
            margin-top: 15px;
            text-align: center;
        }
        
        /* Media Query cho di ƒë·ªông */
        @media (max-width: 600px) {
            .profile-card, .feedback-card {
                padding: 25px 15px;
                margin: 0;
            }
            #main-wrapper {
                padding: 15px 0;
            }
        }

    </style>
    <!-- Th∆∞ vi·ªán Font Awesome cho icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="main-wrapper">
        <div class="profile-card">
            <!-- Logo Tr∆∞·ªùng -->
            <img src="uploaded:image_d1a85f.png-d13814bc-f6cf-49cb-bbe8-f4195e387567" alt="Logo Tr∆∞·ªùng THPT Tr·∫ßn Ph√∫"> 

            <!-- T√™n -->
            <div class="name-container">
                <h1>NG√î TR·∫¶N QU·ªêC DUY</h1>
            </div>

            <!-- Th√¥ng tin c∆° b·∫£n -->
            <div class="details">
                <p><strong>Ng√†y sinh:</strong> 04/09/2008 | <strong>Gi·ªõi t√≠nh:</strong> Nam</p>
                <p><strong>Tr∆∞·ªùng:</strong> THPT Tr·∫ßn Ph√∫, TP.HCM</p>
            </div>
            
            <!-- S·ªü th√≠ch -->
            <div class="hobbies">
                <i class="fas fa-video"></i> Xem phim & <i class="fas fa-music"></i> Nghe nh·∫°c
            </div>
            
            <!-- M·ª•c ti√™u -->
            <div class="goals-section">
                <h2>M·ª•c ti√™u H·ªçc t·∫≠p</h2>
                <div class="goal-badges">
                    <div class="goal-badge" data-goal="T·ªët nghi·ªáp gi·ªèi">
                        <i class="fas fa-medal"></i> T·ªët nghi·ªáp THPT lo·∫°i gi·ªèi
                    </div>
                    <div class="goal-badge dream-uni" data-goal="ƒê·∫≠u ƒê·∫°i h·ªçc">
                        <i class="fas fa-graduation-cap"></i> ƒê·∫≠u v√†o Tr∆∞·ªùng m∆° ∆∞·ªõc
                    </div>
                </div>
            </div>

            <!-- N√∫t Li√™n h·ªá -->
            <a href="https://www.facebook.com/share/1DH3a3shJy/" class="social-button" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-facebook-f"></i> K·∫æT N·ªêI V·ªöI M√åNH
            </a>
            
        </div>
        
        <!-- PH·∫¶N PH·∫¢N H·ªíI M·ªöI -->
        <div class="feedback-card">
            <h2><i class="fas fa-comment-dots"></i> S·ªï L∆∞u B√∫t</h2>
            <form id="feedbackForm">
                <input type="text" id="feedbackName" placeholder="T√™n c·ªßa b·∫°n (T√πy ch·ªçn)">
                <textarea id="feedbackMessage" placeholder="L·ªùi nh·∫Øn mu·ªën g·ª≠i (T·ªëi ƒëa 200 k√Ω t·ª±)..." required maxlength="200"></textarea>
                <button type="submit">G·ª≠i Ph·∫£n H·ªìi</button>
            </form>
            
            <h3 class="feedback-list-title">L·ªùi Nh·∫Øn M·ªõi Nh·∫•t</h3>
            <div id="feedbackList">
                <p style="text-align: center; color: #6c757d; font-size: 0.9em;">ƒêang k·∫øt n·ªëi v√† t·∫£i l·ªùi nh·∫Øn...</p>
            </div>
            <p id="userIdDisplay">ID Ng∆∞·ªùi D√πng: <span id="currentUserId">...</span></p>
        </div>
    </div>

    <!-- FIREBASE V√Ä JAVASCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Thi·∫øt l·∫≠p bi·∫øn to√†n c·ª•c
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // Kh·ªüi t·∫°o Firebase
        if (firebaseConfig) {
            setLogLevel('debug');
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            const auth = getAuth(app);
            let userId = null;

            // DOM elements
            const feedbackForm = document.getElementById('feedbackForm');
            const feedbackList = document.getElementById('feedbackList');
            const userIdSpan = document.getElementById('currentUserId');
            
            // H√†m ƒë·ªãnh d·∫°ng th·ªùi gian
            const formatTimestamp = (timestamp) => {
                if (!timestamp) return 'V·ª´a g·ª≠i';
                const date = timestamp.toDate();
                return date.toLocaleString('vi-VN', { 
                    day: '2-digit', month: '2-digit', year: 'numeric', 
                    hour: '2-digit', minute: '2-digit' 
                });
            };

            // H√†m k·∫øt n·ªëi v√† x·ª≠ l√Ω x√°c th·ª±c
            const setupAuthAndFirestore = async () => {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Firebase Auth Error:", error);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                    } else {
                        // Tr∆∞·ªùng h·ª£p kh√¥ng c√≥ user, d√πng ID ng·∫´u nhi√™n cho m·ª•c ƒë√≠ch hi·ªÉn th·ªã
                        userId = crypto.randomUUID(); 
                    }
                    userIdSpan.textContent = userId;
                    
                    // Ch·ªâ kh·ªüi t·∫°o listener sau khi c√≥ userId
                    if (userId) {
                        setupFeedbackListener(db, appId);
                    }
                });
            };
            
            // Thi·∫øt l·∫≠p Listener theo th·ªùi gian th·ª±c (onSnapshot)
            const setupFeedbackListener = (db, appId) => {
                // ƒê∆∞·ªùng d·∫´n c√¥ng khai (public) ƒë·ªÉ m·ªçi ng∆∞·ªùi ƒë·ªÅu c√≥ th·ªÉ th·∫•y
                const feedbackCollectionRef = collection(db, `artifacts/${appId}/public/data/user_feedback`);
                // QUAN TR·ªåNG: X√≥a orderBy ƒë·ªÉ tr√°nh l·ªói index. S·∫Øp x·∫øp s·∫Ω ƒë∆∞·ª£c th·ª±c hi·ªán tr√™n client.
                const q = query(feedbackCollectionRef); 

                onSnapshot(q, (snapshot) => {
                    let messages = [];
                    snapshot.docs.forEach(doc => {
                        // L·∫•y data v√† th√™m docId ƒë·ªÉ ki·ªÉm tra n·∫øu c·∫ßn
                        messages.push({ ...doc.data() });
                    });
                    
                    // S·∫Øp x·∫øp trong b·ªô nh·ªõ (client-side) ƒë·ªÉ ƒë·∫£m b·∫£o tin nh·∫Øn m·ªõi nh·∫•t l√™n ƒë·∫ßu
                    messages.sort((a, b) => {
                        // So s√°nh timestamp. N·∫øu kh√¥ng c√≥ timestamp (tin nh·∫Øn ƒëang ch·ªù), ƒë·∫∑t n√≥ l√™n ƒë·∫ßu (0)
                        const timeA = a.timestamp ? a.timestamp.toMillis() : 0;
                        const timeB = b.timestamp ? b.timestamp.toMillis() : 0;
                        return timeB - timeA; // S·∫Øp x·∫øp gi·∫£m d·∫ßn (M·ªõi nh·∫•t l√™n ƒë·∫ßu)
                    });


                    feedbackList.innerHTML = ''; // X√≥a n·ªôi dung c≈©
                    if (messages.length === 0) {
                        feedbackList.innerHTML = `<p style="text-align: center; color: #6c757d; font-size: 0.9em;">Ch∆∞a c√≥ l·ªùi nh·∫Øn n√†o. H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n!</p>`;
                        return;
                    }

                    messages.forEach(data => {
                        const item = document.createElement('div');
                        item.classList.add('comment-item');
                        
                        // Hi·ªÉn th·ªã t√™n ng∆∞·ªùi g·ª≠i (ho·∫∑c ID) v√† n·ªôi dung
                        // Tr√°nh hi·ªÉn th·ªã userId ƒë·∫ßy ƒë·ªß, ch·ªâ hi·ªÉn th·ªã 5 k√Ω t·ª± ƒë·∫ßu
                        const displayName = data.name || `Kh√°ch ·∫©n danh (${data.senderId.substring(0, 5)}...)`;
                        const timeString = data.timestamp ? formatTimestamp(data.timestamp) : 'ƒêang x·ª≠ l√Ω...';

                        item.innerHTML = `
                            <p class="comment-name"><i class="fas fa-user-circle"></i> ${displayName}</p>
                            <p class="comment-message">${data.message}</p>
                            <p class="comment-time">${timeString}</p>
                        `;
                        feedbackList.appendChild(item);
                    });
                }, (error) => {
                    console.error("Firestore Listener Error:", error);
                    feedbackList.innerHTML = `<p style="text-align: center; color: var(--accent-primary);">L·ªói t·∫£i l·ªùi nh·∫Øn: Vui l√≤ng ki·ªÉm tra Console.</p>`;
                });
            };

            // X·ª≠ l√Ω G·ª≠i ph·∫£n h·ªìi
            feedbackForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const nameInput = document.getElementById('feedbackName');
                const messageInput = document.getElementById('feedbackMessage');

                const name = nameInput.value.trim();
                const message = messageInput.value.trim();
                
                if (!message) return;

                const submitButton = feedbackForm.querySelector('button');
                submitButton.textContent = 'ƒêang g·ª≠i...';
                submitButton.disabled = true;

                try {
                    await addDoc(collection(db, `artifacts/${appId}/public/data/user_feedback`), {
                        name: name.substring(0, 50) || null,
                        message: message.substring(0, 200),
                        timestamp: serverTimestamp(),
                        senderId: userId,
                    });

                    // X√≥a form sau khi g·ª≠i th√†nh c√¥ng
                    nameInput.value = '';
                    messageInput.value = '';

                } catch (e) {
                    console.error("L·ªñI G·ª¨I L·ªúI NH·∫ÆN: ", e);
                    // D√πng console thay v√¨ alert ƒë·ªÉ tr√°nh l·ªói iframe
                    
                } finally {
                    submitButton.textContent = 'G·ª≠i Ph·∫£n H·ªìi';
                    submitButton.disabled = false;
                }
            });

            // 1. Logic cho Goal Badge (gi·ªØ l·∫°i t√≠nh nƒÉng t∆∞∆°ng t√°c c≈©)
            const goalBadges = document.querySelectorAll('.goal-badge');
            const originalGoal = document.querySelector('.goals-section h2').textContent;
            const goalsTitle = document.querySelector('.goals-section h2');

            goalBadges.forEach(badge => {
                badge.addEventListener('click', () => {
                    goalBadges.forEach(b => {
                        if (b !== badge) {
                            b.classList.remove('clicked');
                        }
                    });
                    badge.classList.toggle('clicked');
                    
                    if (badge.classList.contains('clicked')) {
                         goalsTitle.textContent = `üí™ ƒêang t·∫≠p trung v√†o: ${badge.dataset.goal}`;
                    } else {
                         goalsTitle.textContent = originalGoal;
                    }
                });
            });


            // B·∫Øt ƒë·∫ßu qu√° tr√¨nh x√°c th·ª±c v√† t·∫£i d·ªØ li·ªáu
            setupAuthAndFirestore();

        } else {
            console.error("Firebase config is missing!");
            document.getElementById('feedbackList').innerHTML = '<p style="text-align: center; color: red;">L·ªói: Kh√¥ng th·ªÉ k·∫øt n·ªëi d·ªãch v·ª• l∆∞u tr·ªØ.</p>';
        }

    </script>
</body>
</html>